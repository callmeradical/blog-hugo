  <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> Export and Import SSL Certs from IIS to nginx &middot; Lars Cromley </title>
    
    <link rel="stylesheet" type="text/css" href="http://callmeradical.com//css/uno.min.css" />
    <link rel="stylesheet" type="text/css" href="http://callmeradical.com//css/lightGallery.css" />
    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://callmeradical.com/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="http://callmeradical.com/favicon.ico">
    
    <link href="" rel="alternate" type="application/rss+xml" title="Lars Cromley" />
    
    <script src="http://callmeradical.com//js/jquery.min.js"></script>
    <script src="http://callmeradical.com//js/main.min.js">
    </script>
</head>

  <body>
    <div id="scriptHeader">
    <span class="mobile btn-mobile-menu">
            <i class="fa fa-bars btn-mobile-menu__icon"></i>
            <i class="fa fa-times btn-mobile-close__icon hidden"> </i>
    </span>
    <header class="
        
            panel-cover panel-cover--collapsed
        "  style="background-image: url(/images/background.jpg)" >
    <div class="panel-main">
        <div class="panel-main__inner panel-inverted">
            <div class="panel-main__content"> 
                <a href="http://callmeradical.com//" title="link to homepage for Lars Cromley"> <img src="http://callmeradical.com/images/logo-1.jpg" width="80" alt="Lars Cromley logo" class="panel-cover__logo logo" /> </a> 
                <h1 class="panel-cover__title panel-title">
                    <a href="http://callmeradical.com//"  title="link to homepage for Lars Cromley">Lars Cromley</a>
                </h1>
                <hr class="panel-cover__divider" />
                <p class="panel-cover__description">  Technologist, evangelist, and all around nerd. These thoughts are my own and do not reflect that of my employer.  </p>
                <hr class="panel-cover__divider panel-cover__divider--secondary" />
                <div class="navigation-wrapper">
                    <nav class="cover-navigation cover-navigation--primary">
                        <ul class="navigation">
                            <li class="navigation__item"><a href="http://callmeradical.com/#blog" title="link to Lars Cromley blog" class="blog-button">Blog</a> </li>
                            
                       </ul>
                    </nav> <nav class="cover-navigation navigation--social">
    
      
      <a href="http://twitter.com/callmeradical" title="@callmeradical on Twitter"> <i class='fa fa-twitter'></i> <span class="label">Twitter</span> </a>
       
       
      
        
        <a href="https://github.com/callmeradical" title="callmeradical on github"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
       
       
      
        
        <a href="http://no.linkedin.com/in/callmeradical/en" title="Linkedin"> <i class='fa fa-linkedin'></i> <span class="label">Linkedin</span> </a>
       
      
        
        <a href="mailto:lars@callmeradical.com" title="Email lars@callmeradical.com"> <i class='fa fa-envelope-o'></i> <span class="label">Email</span> </a>
       
</nav>
 </div>
            </div>
        </div>
        <div class="panel-cover--overlay"></div>
    </div>
</header>
</div>
<noscript>
    <style>
        #scriptHeader {display:none;}
        .navigation-wrapper{
            display: block;
            top: 0;
        }
    </style>

    <header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background.jpg)">
        <div class="panel-main">
            <div class="panel-main__inner panel-inverted">
                <div class="panel-main__content"> 
                    <a href="http://callmeradical.com//" title="link to homepage for Lars Cromley"> <img src="http://callmeradical.com/images/logo-1.jpg" width="80" alt="Lars Cromley logo" class="panel-cover__logo logo" /> </a> 
                    <h1 class="panel-cover__title panel-title">
                        <a href="http://callmeradical.com//"  title="link to homepage for Lars Cromley">Lars Cromley</a>
                    </h1>
                    <hr class="panel-cover__divider" />
                    <p class="panel-cover__description">  Technologist, evangelist, and all around nerd. These thoughts are my own and do not reflect that of my employer.  </p>
                    <hr class="panel-cover__divider panel-cover__divider--secondary" />
                    <div class="navigation-wrapper">
                            <ul class="navigation">
                                <li class="navigation__item"><a href="http://callmeradical.com//#blog" title="link to Lars Cromley blog" class="blog-button">Blog</a> </li></br>
                                <li class="navigation__item"><a href="http://callmeradical.com/pages/about" title="information about me " class="blog-button">About</a> </li></br> 
                                
                           </ul>
                        <nav class="cover-navigation navigation--social">
    
      
      <a href="http://twitter.com/callmeradical" title="@callmeradical on Twitter"> <i class='fa fa-twitter'></i> <span class="label">Twitter</span> </a>
       
       
      
        
        <a href="https://github.com/callmeradical" title="callmeradical on github"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
       
       
      
        
        <a href="http://no.linkedin.com/in/callmeradical/en" title="Linkedin"> <i class='fa fa-linkedin'></i> <span class="label">Linkedin</span> </a>
       
      
        
        <a href="mailto:lars@callmeradical.com" title="Email lars@callmeradical.com"> <i class='fa fa-envelope-o'></i> <span class="label">Email</span> </a>
       
</nav>
 </div>
                </div>
            </div>
            <div class="panel-cover--overlay"></div>
        </div>
    </header>
</noscript>

    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <div class="post">
          <h1>Export and Import SSL Certs from IIS to nginx</h1>
          <span class="post-date">Mon, Nov 25, 2013</span>
          <p>While transitioning a website built in .NET there came a time to move the server to something a little more robust&hellip; like Linux! The following steps are more for my benefit but they may help in a pinch.
<!-- More -->
<hr></hr></p>

<p>To export the SSL certificate from your Windows Server:</p>

<ol>
<li>Run &ldquo;mmc.exe&rdquo; from Start-&gt;Run menu;</li>
<li>Open &ldquo;File&rdquo;-&gt;&ldquo;Add/Remove Snap-in&rdquo;;</li>
<li>Click on &ldquo;Add&hellip;&rdquo; button, select &ldquo;Certificates&rdquo; option, click &ldquo;Add&rdquo;, select &ldquo;Computer account&rdquo;; Next; Finish;</li>
<li>Close &ldquo;Add standalone snap-in&rdquo;; close &ldquo;Add/Remove snap-in&rdquo; by &ldquo;Ok&rdquo; button;</li>
<li>Open &ldquo;Personal&rdquo; folder and find corresponding certificate;</li>
<li>Right click on &ldquo;Certificates&rdquo;, select &ldquo;All tasks&rdquo;-&gt;&ldquo;Export&rdquo;;</li>
<li>On &ldquo;Certificate export wizard&rdquo; click Next, select &ldquo;Yes, export the private key&rdquo;, select &ldquo;Personal Information Exchange&rdquo; format, click Next, enter password, select file, click Finish.</li>
</ol>

<p>Copy the Certificate files to your server to the directory on your server where you will keep your certificate and key files. Make them readable by root only to increase security.</p>

<p>Concatenate the primary certificate and intermediate certificate.</p>

<p>You need to concatenate the primary certificate file (your_domain_name.crt) and the intermediate certificate file (DigiCertCA.crt) into a single pem file by running the following command:</p>

<pre><code class="language-bash">cat DigiCertCA.crt &gt;&gt; your_domain_name.crt
</code></pre>

<p>Edit the Nginx virtual hosts file:</p>

<p>Now open your Nginx virtual host file for the website you are securing. If you need your site to be accessible through both secure (https) and non-secure (http) connections, you will need a server module for each type of connection. Make a copy of the existing non-secure server module and paste it below the original. Then add the lines in bold below:</p>

<pre><code>server {

listen 443;

ssl on;
ssl_certificate /etc/ssl/your_domain_name.crt; (or .pem)
ssl_certificate_key /etc/ssl/your_domain_name.key;

server_name your.domain.com;
access_log /var/log/nginx/nginx.vhost.access.log;
error_log /var/log/nginx/nginx.vhost.error.log;
location / {
root /home/www/public_html/your.domain.com/public/;
index index.html;
	}
}
</code></pre>

<p>Adjust the file names to match your certificate files:</p>

<p>ssl_certificate should be your primary certificate combined with the intermediate certificate that you made in the previous step (e.g. your_domain_name.crt).
ssl_certificate_key should be the key file generated when you created the CSR.
Restart Nginx.</p>

<pre><code class="language-bash">sudo /etc/init.d/nginx restart
</code></pre>

        </div>
        <div class="sharing">
<a href="https://twitter.com/intent/tweet?status=Export%20and%20Import%20SSL%20Certs%20from%20IIS%20to%20nginx-http%3a%2f%2fcallmeradical.com%2fpost%2fexport-and-import-ssl-certs-from-iis-to-nginx%2f" target="_blank" title="Follow me on Twitter" class="twitter">
<span class="fa fa-twitter-square fa-2x"></span></a>
<a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fcallmeradical.com%2fpost%2fexport-and-import-ssl-certs-from-iis-to-nginx%2f" target="_blank" title="Join me on Facebook" class="facebook">
<span class="fa fa-facebook-square fa-2x"></span></a>
<a href="https://plus.google.com/share?url=http%3a%2f%2fcallmeradical.com%2fpost%2fexport-and-import-ssl-certs-from-iis-to-nginx%2f" target="_blank" title="Google+" class="googleplus">
<span class="fa fa-google-plus-square fa-2x"></span></a>
<a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fcallmeradical.com%2fpost%2fexport-and-import-ssl-certs-from-iis-to-nginx%2f&title=Export%20and%20Import%20SSL%20Certs%20from%20IIS%20to%20nginx" target="_blank" title="LinkedIn" class="linkedin">
<span class="fa fa-linkedin-square fa-2x"></span></a>
<a href="http://www.reddit.com/submit?url=http%3a%2f%2fcallmeradical.com%2fpost%2fexport-and-import-ssl-certs-from-iis-to-nginx%2f" target="_blank" title="Reddit" class="reddit"><span class="fa fa-reddit-square fa-2x"></span></a>
<a href="http://www.stumbleupon.com/submit?url=http%3a%2f%2fcallmeradical.com%2fpost%2fexport-and-import-ssl-certs-from-iis-to-nginx%2f" target="_blank" title="StumbleUpon" class="stumbleupon"><span class="fa fa-stumbleupon fa-2x">
</span></a>
</div>

        


<div id="disqus_thread"></div>

<script type="text/javascript">
  var disqusUsername = "callmeradical";

  (function() { 
  var d = document, s = d.createElement('script');

  s.src = '//' + disqusUsername + '.disqus.com/embed.js';

  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


      </div>
    </div>

  </body>
  
</html>
